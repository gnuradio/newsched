module: digital
block: ofdm_cyclic_prefixer
label: ofdm_cyclic_prefixer
blocktype: block
flags: 
    - pdu

doc: 
    brief: Adds a cyclic prefix and performs optional pulse shaping on OFDM symbols.
    detail: |-
        Input: OFDM symbols (in the time domain, i.e. after the IFFT). Optionally,
               entire frames can be processed. 
        Output: A stream of (scalar) complex symbols, which include the cyclic prefix
                and the pulse shaping.
                Note: If complete frames are processed, and \p rolloff_len is greater
                than zero, the final OFDM symbol is followed by the delay line of
                the pulse shaping.

        The pulse shape is a raised cosine in the time domain.

        Different CP lengths as for instance needed in LTE are supported. This
        is why one of the inputs is std::vector<int>. After every CP given has
        been prepended to symbols, each with the length of the IFFT operation,
        the mechanism will wrap around and start over. To give an example, the
        input tuple for LTE with an FFT length of 2048 would be (160,) +
        (144,)*6, which is equal to (160, 144, 144, 144, 144, 144, 144). A
        uniform CP would be indicated by (uniform_cp_length, ).

        This block does some sanity checking: 1. It is not allowed to have a
        vector of CP lengths, which are only 0.  2. Not a single CP in the
        vector must be longer than the rolloff. 3. Not a single CP is allowed to
        be < 0.

parameters:
-   id: fft_len
    label: IFFT Length
    dtype: size_t
    settable: false
-   id: cp_lengths
    label: CP Lengths
    dtype: size_t
    container: vector
    settable: false
-   id: rolloff_len
    label: Rollof Length
    dtype: size_t
    default: 0
    settable: false

ports:
-   domain: stream
    id: in
    direction: input
    type: gr_complex
    shape: parameters/fft_len

-   domain: stream
    id: out
    direction: output
    type: gr_complex


implementations:
-   id: cpu
# -   id: cuda

file_format: 1
